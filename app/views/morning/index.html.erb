<div class="morning">
  <h1>The Morning Show</h1>
  <div class="meta">
    Showing <%= @plays.size %> plays â€¢ Last updated <%= Time.current.strftime('%Y-%m-%d %H:%M') %>
  </div>
  <div class="actions">
    <%= button_to "Refresh Today", refresh_morning_index_path, method: :post, class: "btn" %>
    <%= button_to "Backfill Last 30 Days", backfill_morning_index_path, method: :post, class: "btn btn-danger" %>
  </div>
  <% if notice %>
    <p class="notice"><%= notice %></p>
  <% end %>
  <% if alert %>
    <p class="alert"><%= alert %></p>
  <% end %>
  <!-- ðŸ”¥ Top Songs (last 30 days) -->
  <h2>Top 40 (Last 30 Days)</h2>
  <div class="scroll-box">
    <table class="top-songs">
      <thead>
        <tr>
          <th>Artist</th>
          <th>Song</th>
          <th>Count</th>
        </tr>
      </thead>
      <tbody>
        <% @top_songs.each do |artist, song, count| %>
          <tr>
            <td><%= artist %></td>
            <td><%= song %></td>
            <td><%= count %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <!-- ðŸŽµ Recent plays -->
  <h2>Recent Plays</h2>
  <div class="scroll-box">
    <table class="recent-plays">
      <thead>
        <tr>
          <th>Time (PT)</th>
          <th>Artist</th>
          <th>Song</th>
          <th>Album</th>
        </tr>
      </thead>
      <tbody>
        <% @plays.each do |p| %>
          <tr>
            <td><%= p.played_at&.in_time_zone('Pacific Time (US & Canada)')&.strftime('%Y-%m-%d %H:%M') %></td>
            <td><%= p.artist %></td>
            <td><%= p.song %></td>
            <td><%= p.album %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
